<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Watches | Lorent</title>
    <style>
        :root {
          --gold: #d4af37;
          --black: #181818;
          --white: #fff;
          --gray: #e5e5e5;
        }

        body {
          margin: 0;
          background: var(--black);
          color: var(--white);
          font-family: 'Montserrat', Arial, sans-serif;
          letter-spacing: 0.02em;
        }

        header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          background: rgba(24, 24, 24, 0.96);
          padding: 1rem 2rem;
          box-shadow: 0 2px 8px rgba(212, 175, 55, 0.05);
          position: sticky;
          top: 0;
          z-index: 100;
        }

        .logo {
          font-size: 2rem;
          font-weight: bold;
          color: var(--gold);
          letter-spacing: 0.1em;
        }

        nav a {
          color: var(--white);
          margin-left: 2rem;
          text-decoration: none;
          font-size: 1.1rem;
          position: relative;
          transition: color 0.3s;
        }

        nav a:hover, nav .basket-link:hover {
          color: var(--gold);
        }

        .basket-link #basket-count {
          background: var(--gold);
          color: var(--black);
          border-radius: 12px;
          padding: 0 6px;
          font-size: 0.9rem;
          margin-left: 2px;
        }

        .section {
          margin: 3rem auto;
          max-width: 950px;
          padding: 2rem 1rem;
          background: rgba(24, 24, 24, 0.85);
          border-radius: 1.5rem;
          box-shadow: 0 4px 32px rgba(212, 175, 55, 0.06);
        }

        h2 {
          color: var(--gold);
          margin-bottom: 1.5rem;
          font-size: 2rem;
        }

        .watch-list {
          display: flex;
          gap: 2rem;
          flex-wrap: wrap;
          justify-content: center;
        }

        .watch-card {
          background: #232323;
          border-radius: 1rem;
          box-shadow: 0 2px 16px rgba(212, 175, 55, 0.04);
          padding: 1.5rem;
          text-align: center;
          width: 260px;
          transition: box-shadow 0.3s;
        }

        .watch-card:hover {
          box-shadow: 0 8px 32px var(--gold);
        }

        .watch-card img {
          max-width: 180px;
          border-radius: 0.5rem;
          margin-bottom: 1rem;
          border: 3px solid var(--gold);
        }

        .watch-card h3 {
          color: var(--gold);
        }

        .watch-card button {
          background: var(--gold);
          color: var(--black);
          border: none;
          padding: 0.6rem 1.5rem;
          border-radius: 1.2rem;
          margin-top: 1rem;
          cursor: pointer;
          font-weight: 600;
          transition: background 0.3s;
        }

        .watch-card button:hover {
          background: #bfa533;
        }

        /* Chat icon and box styles */
        #chat-icon {
          position: fixed;
          bottom: 32px;
          right: 32px;
          background: var(--gold);
          color: var(--black);
          width: 60px;
          height: 60px;
          border-radius: 50%;
          font-size: 2.5rem;
          display: flex;
          justify-content: center;
          align-items: center;
          box-shadow: 0 4px 16px rgba(212, 175, 55, 0.22);
          cursor: pointer;
          z-index: 2000;
          transition: all 0.3s;
        }

        #chat-icon:hover {
          background: #bfa533;
          transform: scale(1.1);
        }

        #chat-box {
          position: fixed;
          bottom: 110px;
          right: 36px;
          width: 380px;
          background: #222;
          color: var(--white);
          border-radius: 1rem;
          box-shadow: 0 8px 32px rgba(212,175,55,0.12);
          z-index: 2000;
          padding: 0;
          overflow: hidden;
          max-height: 600px;
          transition: all 0.3s ease;
        }

        #chat-box.hidden {
          display: none;
        }

        #chat-box.voicebot-active {
          width: 450px;
          height: 600px;
        }

        .chat-header {
          background: linear-gradient(135deg, var(--gold), #bfa533);
          color: var(--black);
          padding: 1.2rem;
          text-align: center;
          position: relative;
        }

        .chat-header h3 {
          margin: 0 0 0.5rem 0;
          font-size: 1.2rem;
          font-weight: 700;
        }

        .chat-header p {
          margin: 0;
          font-size: 0.9rem;
          opacity: 0.8;
        }

        .back-btn {
          position: absolute;
          left: 1rem;
          top: 50%;
          transform: translateY(-50%);
          background: rgba(0,0,0,0.2);
          border: none;
          color: var(--black);
          font-size: 1.2rem;
          width: 30px;
          height: 30px;
          border-radius: 50%;
          cursor: pointer;
          display: none;
        }

        .back-btn.visible {
          display: block;
        }

        .back-btn:hover {
          background: rgba(0,0,0,0.3);
        }

        .chat-body {
          padding: 1.5rem;
          overflow-y: auto;
          max-height: 450px;
        }

        .chat-body.voicebot-view {
          padding: 0;
          max-height: none;
          height: 480px;
        }

        .chat-option {
          display: flex;
          align-items: flex-start;
          gap: 1rem;
          margin-bottom: 1.5rem;
          padding: 1rem;
          background: #2a2a2a;
          border-radius: 0.8rem;
          transition: background 0.3s;
        }

        .chat-option:hover {
          background: #333;
        }

        .option-icon {
          font-size: 2rem;
          flex-shrink: 0;
        }

        .option-content h4 {
          margin: 0 0 0.5rem 0;
          color: var(--gold);
          font-size: 1rem;
        }

        .option-content p {
          margin: 0 0 1rem 0;
          font-size: 0.9rem;
          opacity: 0.8;
          line-height: 1.4;
        }

        .voice-chat-btn {
          background: var(--gold);
          color: var(--black);
          border: none;
          border-radius: 0.5rem;
          padding: 0.6rem 1.2rem;
          cursor: pointer;
          font-weight: 600;
          font-size: 0.9rem;
          transition: all 0.3s;
          text-decoration: none;
          display: inline-block;
          text-align: center;
        }

        .voice-chat-btn:hover {
          background: #bfa533;
          transform: translateY(-1px);
        }

        #voicebot-iframe {
          width: 100%;
          height: 100%;
          border: none;
          background: #fff;
          border-radius: 0 0 1rem 1rem;
        }

        .voicebot-container {
          display: none;
          height: 100%;
        }

        .voicebot-container.active {
          display: block;
        }

        #close-chat {
          width: 100%;
          background: #333;
          color: var(--white);
          border: none;
          border-radius: 0;
          padding: 1rem;
          cursor: pointer;
          font-weight: 600;
          transition: background 0.3s;
          border-top: 1px solid #444;
        }

        #close-chat:hover {
          background: #444;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
          #chat-box {
            width: calc(100vw - 40px);
            right: 20px;
            left: 20px;
            bottom: 110px;
          }
          
          #chat-box.voicebot-active {
            width: calc(100vw - 40px);
            height: 70vh;
          }
          
          .chat-option {
            flex-direction: column;
            text-align: center;
            gap: 0.5rem;
          }
          
          .option-icon {
            align-self: center;
          }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Lorent</div>
        <nav>
            <a href="watches.html">Watches</a>
            <a href="index.html#about">About</a>
            <a href="contact.html">Contact</a>
            <a href="basket.html" class="basket-link">
                <span>üõí</span>
                <span id="basket-count">0</span>
            </a>
        </nav>
    </header>

    <main>
        <section class="section">
            <h2>All Watches</h2>
            <div class="watch-list">
                <div class="watch-card">
                    <img src="https://via.placeholder.com/180x180/d4af37/000000?text=Watch+1" alt="Gold Heritage" />
                    <h3>Gold Heritage</h3>
                    <p>18k gold, sapphire crystal, Swiss movement.</p>
                    <button class="add-basket-btn" data-name="Gold Heritage">Add to Basket</button>
                </div>
                <div class="watch-card">
                    <img src="https://via.placeholder.com/180x180/d4af37/000000?text=Watch+2" alt="Silver Classic" />
                    <h3>Silver Classic</h3>
                    <p>Stainless steel, automatic movement, water resistant.</p>
                    <button class="add-basket-btn" data-name="Silver Classic">Add to Basket</button>
                </div>
                <div class="watch-card">
                    <img src="https://via.placeholder.com/180x180/d4af37/000000?text=Watch+3" alt="Rose Gold Elite" />
                    <h3>Rose Gold Elite</h3>
                    <p>Rose gold plated, leather strap, premium craftsmanship.</p>
                    <button class="add-basket-btn" data-name="Rose Gold Elite">Add to Basket</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Chat integration -->
    <div id="chat-icon">üí¨</div>
    <div id="chat-box" class="hidden">
        <div class="chat-header">
            <button id="back-btn" class="back-btn">‚Üê</button>
            <h3 id="chat-title">Lorent Watch Advisor</h3>
            <p id="chat-subtitle">Get personalized watch recommendations</p>
        </div>
        
        <!-- Main chat options view -->
        <div class="chat-body" id="chat-options">
            <div class="chat-option">
                <div class="option-icon">üé§</div>
                <div class="option-content">
                    <h4>Voice Chat</h4>
                    <p>Talk to our AI advisor about your perfect timepiece</p>
                    <button id="start-voice-chat" class="voice-chat-btn">Start Voice Chat</button>
                </div>
            </div>
        </div>

        <!-- Voicebot iframe container -->
        <div class="voicebot-container" id="voicebot-container">
            <div class="chat-body voicebot-view">
                <iframe 
                    id="voicebot-iframe" 
                    src=""
                    allow="microphone; camera"
                    title="Lorent Voice Assistant">
                </iframe>
            </div>
        </div>

        <button id="close-chat">Close</button>
    </div>

    <script>
        // Shopping basket functionality
        let basketCount = 0;
        const basketCountElem = document.getElementById('basket-count');

        document.querySelectorAll('.add-basket-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                basketCount++;
                basketCountElem.textContent = basketCount;
                btn.textContent = "Added!";
                btn.disabled = true;
                setTimeout(() => {
                    btn.textContent = "Add to Basket";
                    btn.disabled = false;
                }, 1500);
            });
        });

        // Voicebot integration
        const VOICEBOT_URL = 'https://lorent-watchmaker-v1.vercel.app/?config_id=0359ded1-a9cd-4330-8709-3a0fd9c53419';

        // Chat interface elements
        const chatIcon = document.getElementById('chat-icon');
        const chatBox = document.getElementById('chat-box');
        const closeChat = document.getElementById('close-chat');
        const startVoiceChat = document.getElementById('start-voice-chat');
        const backBtn = document.getElementById('back-btn');
        const chatOptions = document.getElementById('chat-options');
        const voicebotContainer = document.getElementById('voicebot-container');
        const voicebotIframe = document.getElementById('voicebot-iframe');
        const chatTitle = document.getElementById('chat-title');
        const chatSubtitle = document.getElementById('chat-subtitle');

        // Toggle chat box visibility
        chatIcon.addEventListener('click', () => {
            chatBox.classList.toggle('hidden');
        });

        // Close chat
        closeChat.addEventListener('click', () => {
            chatBox.classList.add('hidden');
            resetChatView();
        });

        // Start voice chat - embed iframe instead of opening new window
        startVoiceChat.addEventListener('click', () => {
            // Hide options and show voicebot
            chatOptions.style.display = 'none';
            voicebotContainer.classList.add('active');
            
            // Update chat box appearance
            chatBox.classList.add('voicebot-active');
            backBtn.classList.add('visible');
            chatTitle.textContent = 'Voice Assistant';
            chatSubtitle.textContent = 'Speak with our AI watch expert';
            
            // Load the voicebot in iframe
            voicebotIframe.src = VOICEBOT_URL;
        });

        // Back button functionality
        backBtn.addEventListener('click', () => {
            resetChatView();
        });

        // Reset chat to main view
        function resetChatView() {
            chatOptions.style.display = 'block';
            voicebotContainer.classList.remove('active');
            chatBox.classList.remove('voicebot-active');
            backBtn.classList.remove('visible');
            chatTitle.textContent = 'Lorent Watch Advisor';
            chatSubtitle.textContent = 'Get personalized watch recommendations';
            
            // Clear iframe to stop any ongoing voice session
            voicebotIframe.src = '';
        }

        // Handle contact form if present
        const contactForm = document.getElementById('contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Thank you for reaching out! We will contact you soon.');
                contactForm.reset();
            });
        }
    </script>
</body>
</html>